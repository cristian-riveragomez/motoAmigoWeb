<h1 class="mt-3">Crear Nueva Cuenta</h1>
<hr class="titulos">
  <form
    autocomplete="off"
    (ngSubmit)="guardarUsuario(formularioValue)"
    #formularioValue="ngForm"
  >
    <div>
      <div class="form-group row ">
        <label class="col-2 col-form-label">Nombre</label>
        <div class="col-7">
          <input
            class="form-control"
            type="text"
            name="nombre"
            required
            [(ngModel)]="usuario.nombre"
            [class.is-invalid] = "nombre.invalid && nombre.touched"  
            #nombre = "ngModel"
            maxlength="20"
          />
          <small *ngIf="nombre.invalid && nombre.touched" class="form-text text-danger"> El campo Nombre es obligatorio</small>
        </div>
      </div>

      <div class="form-group row ">
        <label class="col-2 col-form-label">Apellido</label>
        <div class="col-7">
          <input
            class="form-control"
            type="text"
            name="apellido"
            required
            [(ngModel)]="usuario.apellido"
            [class.is-invalid] = "apellido.invalid && apellido.touched"  
            #apellido = "ngModel"
            maxlength="30"
          />
          <small *ngIf="apellido.invalid && apellido.touched" class="form-text text-danger"> El campo Apellido es obligatorio</small>
        </div>
      </div>

      <div class="form-group row ">
        <label class="col-2 col-form-label">Usuario</label>
        <div class="col-7">
          <input
            class="form-control"
            type="text"
            name="nombreUsuario"
            required
            [(ngModel)]="usuario.nombreUsuario"
            [class.is-invalid] = "nombreUsuario.invalid && nombreUsuario.touched"  
            #nombreUsuario = "ngModel"
            maxlength="20"
          />
          <small *ngIf="nombreUsuario.invalid && nombreUsuario.touched" class="form-text text-danger"> El campo Usuario es obligatorio</small>
        </div>
      </div>

      <div class="form-group row ">
        <label class="col-2 col-form-label">Contraseña</label>
        <div class="col-7">
          <input
            class="form-control"
            type="text"
            name="contrasena"
            required
            [(ngModel)]="usuario.contrasena"
            #contrasena = "ngModel"
            pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_.-])[a-zA-Z\d!@#$%^&*()_.-]{8,}$"
            [class.is-invalid]="contrasena.invalid && contrasena.touched"
            maxlength="20"
          />
          <small *ngIf="contrasena.invalid && contrasena.errors && contrasena.touched" class="form-text text-danger">
              <span *ngIf="contrasena.errors['required']">El campo Contraseña es obligatorio</span>
              <span *ngIf="contrasena.errors['pattern'] && !contrasena.errors['required']">La contraseña debe tener al menos 8 caracteres, una letra mayúscula y debe contener números</span>            
          </small>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-2 col-form-label">Email</label>
      <div class="col-7">
        <input
          class="form-control"
          type="email"
          [(ngModel)]="usuario.email"
          name="email"
          [class.is-invalid]="email.invalid && email.touched"
          #email="ngModel"
          maxlength="50"
          pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$"
          required
        />
        <small *ngIf="email.invalid && email.errors && email.touched" class="form-text text-danger">
          <span *ngIf="email.errors['required']">El campo Email es obligatorio</span>
          <span *ngIf="email.errors['pattern'] && !email.errors['required']">El formato del Email es incorrecto</span>
        </small>
      </div>
    </div>

    <div class="col text-right">
      <p style="color:white">
        Ya tiene una cuenta? <a [routerLink]="['/login']">/ Ingresar cuenta</a>
      </p>
    </div>

    <div class="d-grid gap-2 col-4 mx-auto">
      <button class="btn btn-success btn-block btn-lg" type="submit">Guardar
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-save-fill" viewBox="0 0 16 16">
            <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v7.793L4.854 6.646a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l3.5-3.5a.5.5 0 0 0-.708-.708L8.5 9.293V1.5z"/>
          </svg>
      </button>
    </div>
    
  </form>

